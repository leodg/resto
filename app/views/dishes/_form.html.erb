<% form_for @dish do |f| %>
  <%= f.error_messages %>

<table>

  <tr>
    <td>
      <p>
        <%= f.label :name, "Название" %><br />
        <%= f.text_field :name %>
      </p>
      <p>
        <%= f.label :category_id, "Категория" %><br />

        <%= tree_select(Category.find(:all, :conditions => "parent_id is null"), 'dish', 'category_id', @dish.category , 0, true, false, true) %>
        
      </p>
      <p>
        <%= f.label :desc, "Описание" %><br />
        <%= f.text_area :desc %>
      </p>
      <p>
        <%= f.label :price, "Цена" %><br />
        <%= f.text_field :price, :size => 5 %>
      </p>
      <p>
        <%= f.check_box :available, :checked => true %>
        <%= f.label :available, "Доступно" %>
      </p>
      <p><%= f.submit %></p>
    </td>

    <td>
      <div>        
        <% f.fields_for :compositions do |builder| %>
            <%= render 'composition_fields', :f => builder %>
        <% end %>
        <%= link_to_add_fields "Еще ингредиент", f, :compositions %>
      </div>
    </td>
  </tr>


</table>

<% end %>
